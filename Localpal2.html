<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalPal - Demo para Inversores</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --primary: #FF6B35;
            --secondary: #00A896;
            --dark: #2D3748;
            --light: #F7F9FC;
            --gray: #718096;
            --success: #48BB78;
            --warning: #ED8936;
            --danger: #F56565;
            --border-radius: 16px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: var(--light);
            color: var(--dark);
            max-width: 430px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.1);
            overflow-x: hidden;
        }

        /* Login Screen */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            transition: transform 0.5s ease;
        }

        .login-screen.hidden {
            transform: translateY(-100%);
        }

        .login-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 40px;
        }

        .login-logo .logo-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .login-logo .logo-icon i {
            font-size: 40px;
            color: white;
        }

        .login-logo h1 {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .login-logo p {
            color: var(--gray);
            font-size: 16px;
            text-align: center;
        }

        .login-form {
            width: 100%;
            max-width: 320px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 1px solid #E2E8F0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input.error {
            border-color: var(--danger);
            background-color: rgba(245, 101, 101, 0.05);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .form-group .error-message {
            color: var(--danger);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .login-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            font-size: 14px;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .remember-me input {
            width: 18px;
            height: 18px;
        }

        .forgot-password {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .btn-login {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
            position: relative;
        }

        .btn-login:hover {
            background: #E55A2B;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.3);
        }

        .btn-login:active {
            transform: translateY(0);
        }

        .btn-login.loading {
            opacity: 0.8;
            cursor: not-allowed;
        }

        .btn-login.loading .btn-text {
            visibility: hidden;
        }

        .btn-login.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            border: 3px solid transparent;
            border-top-color: white;
            border-radius: 50%;
            animation: button-loading-spinner 1s ease infinite;
        }

        @keyframes button-loading-spinner {
            from { transform: rotate(0turn); }
            to { transform: rotate(1turn); }
        }

        .login-error {
            background: rgba(245, 101, 101, 0.1);
            border: 1px solid rgba(245, 101, 101, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            color: var(--danger);
            font-size: 14px;
            display: none;
            text-align: center;
        }

        .login-error.show {
            display: block;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .social-login {
            text-align: center;
            margin-top: 25px;
            color: var(--gray);
            font-size: 14px;
            position: relative;
        }

        .social-login::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #E2E8F0;
            z-index: 1;
        }

        .social-login span {
            background: white;
            padding: 0 15px;
            position: relative;
            z-index: 2;
        }

        .social-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-btn {
            flex: 1;
            padding: 14px;
            border: 1px solid #E2E8F0;
            border-radius: 12px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .social-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .social-btn.google i {
            color: #DB4437;
        }

        .social-btn.facebook i {
            color: #4267B2;
        }

        .signup-link {
            text-align: center;
            margin-top: 25px;
            color: var(--gray);
        }

        .signup-link a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        /* Demo Credentials */
        .demo-credentials {
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid rgba(255, 107, 53, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-top: 25px;
            font-size: 14px;
        }

        .demo-credentials h4 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 16px;
        }

        .demo-credentials p {
            margin-bottom: 5px;
            color: var(--dark);
        }

        .demo-credentials code {
            background: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-family: monospace;
            color: var(--primary);
        }

        /* Main App (hidden by default) */
        .main-app {
            display: none;
        }

        .main-app.active {
            display: block;
        }

        /* Header */
        .header {
            background: white;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #E2E8F0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 22px;
            color: var(--primary);
        }

        .logo i {
            color: var(--secondary);
        }

        .header-actions {
            display: flex;
            gap: 20px;
        }

        .header-actions i {
            font-size: 20px;
            color: var(--gray);
            cursor: pointer;
            position: relative;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 430px;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 14px 0;
            border-top: 1px solid #E2E8F0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
            padding: 8px 12px;
            border-radius: 12px;
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(255, 107, 53, 0.08);
        }

        .nav-item i {
            font-size: 20px;
        }

        .nav-item span {
            font-size: 11px;
            font-weight: 500;
        }

        .create-button {
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: -25px;
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
            cursor: pointer;
        }

        /* Screens */
        .screen {
            display: none;
            padding-bottom: 80px;
        }

        .screen.active {
            display: block;
        }

        /* MAP VIEW */
        .map-container {
            height: calc(100vh - 120px);
            position: relative;
        }

        #map {
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .map-controls {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 12px;
        }

        .map-search {
            flex: 1;
            display: flex;
            align-items: center;
            background: white;
            border-radius: 12px;
            padding: 12px 16px;
            box-shadow: var(--shadow);
        }

        .map-search i {
            color: var(--gray);
            font-size: 18px;
            margin-right: 10px;
        }

        .map-search input {
            flex: 1;
            border: none;
            background: none;
            font-size: 15px;
            color: var(--dark);
            outline: none;
        }

        .map-filters-btn {
            background: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            color: var(--primary);
            font-size: 20px;
        }

        .map-filters-panel {
            position: absolute;
            bottom: 90px;
            left: 20px;
            right: 20px;
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            z-index: 1000;
            display: none;
        }

        .map-filters-panel.active {
            display: block;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .filters-title {
            font-weight: 600;
            font-size: 18px;
        }

        .close-filters {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--gray);
            cursor: pointer;
        }

        .filters-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
        }

        .filter-category {
            padding: 10px 16px;
            background: var(--light);
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-category.active {
            background: var(--primary);
            color: white;
        }

        .filter-category i {
            font-size: 16px;
        }

        .filter-slider {
            margin-bottom: 25px;
        }

        .filter-slider label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--dark);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-value {
            min-width: 60px;
            font-weight: 600;
            color: var(--primary);
        }

        .map-bottom-sheet {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -4px 30px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s;
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .map-bottom-sheet.active {
            transform: translateY(0);
        }

        .sheet-handle {
            width: 40px;
            height: 4px;
            background: #E2E8F0;
            border-radius: 2px;
            margin: 0 auto 20px;
        }

        .sheet-content h3 {
            margin-bottom: 15px;
            font-size: 18px;
        }

        .map-marker-preview {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: flex-start;
        }

        .marker-preview-image {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
        }

        .marker-preview-info {
            flex: 1;
        }

        .marker-preview-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 6px;
        }

        .marker-preview-category {
            font-size: 12px;
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .marker-preview-meta {
            font-size: 13px;
            color: var(--gray);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .marker-preview-price {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
        }

        .map-view-toggle {
            position: absolute;
            bottom: 100px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .view-toggle-btn {
            background: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            cursor: pointer;
            color: var(--gray);
            font-size: 20px;
            transition: all 0.3s;
        }

        .view-toggle-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Custom Leaflet Markers */
        .leaflet-marker-icon {
            border: none !important;
            background: none !important;
        }

        .custom-marker {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.3s;
        }

        .custom-marker:hover {
            transform: translate(-50%, -50%) scale(1.2);
        }

        .marker-food { background: #FF6B35; }
        .marker-culture { background: #00A896; }
        .marker-nature { background: #48BB78; }
        .marker-music { background: #9F7AEA; }
        .marker-history { background: #ED8936; }
        .marker-entertainment { background: #F56565; }
        .marker-user { background: #4C51BF; }
        .marker-event { background: #D69E2E; }

        .marker-cluster {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
            background: var(--primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* Stories */
        .stories {
            display: flex;
            gap: 16px;
            padding: 20px;
            overflow-x: auto;
            background: white;
            border-bottom: 1px solid #E2E8F0;
        }

        .story {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-width: 70px;
        }

        .story-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            border: 3px solid var(--primary);
            padding: 3px;
            cursor: pointer;
        }

        .story-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .story-name {
            font-size: 12px;
            font-weight: 500;
            color: var(--dark);
        }

        /* Feed Posts */
        .feed {
            padding: 20px;
        }

        .post-card {
            background: white;
            border-radius: var(--border-radius);
            margin-bottom: 24px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .post-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .post-header {
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .post-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            object-fit: cover;
        }

        .post-user-info h3 {
            font-size: 15px;
            font-weight: 600;
        }

        .post-user-info p {
            font-size: 13px;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .post-image {
            width: 100%;
            height: 280px;
            object-fit: cover;
        }

        .post-actions {
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .post-actions-left {
            display: flex;
            gap: 20px;
        }

        .action-btn {
            background: none;
            border: none;
            font-size: 22px;
            color: var(--gray);
            cursor: pointer;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .action-btn:hover {
            color: var(--primary);
        }

        .action-btn i.fas {
            color: var(--primary);
        }

        .post-info {
            padding: 0 16px 16px;
        }

        .post-likes {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .post-caption {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .post-time {
            font-size: 12px;
            color: var(--gray);
        }

        /* Discover Screen (List View) */
        .discover-header {
            padding: 20px;
            background: white;
            border-bottom: 1px solid #E2E8F0;
        }

        .search-bar {
            padding: 20px;
            background: white;
        }

        .search-container {
            display: flex;
            gap: 12px;
            align-items: center;
            background: var(--light);
            border-radius: 12px;
            padding: 12px 16px;
        }

        .search-container i {
            color: var(--gray);
            font-size: 18px;
        }

        .search-container input {
            flex: 1;
            border: none;
            background: none;
            font-size: 15px;
            color: var(--dark);
            outline: none;
        }

        .categories {
            display: flex;
            gap: 12px;
            padding: 0 20px 20px;
            overflow-x: auto;
            background: white;
        }

        .category {
            padding: 10px 20px;
            background: var(--light);
            border-radius: 20px;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .category.active {
            background: var(--primary);
            color: white;
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            padding: 20px;
        }

        .event-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s;
        }

        .event-card:hover {
            box-shadow: var(--shadow-hover);
        }

        .event-image {
            width: 100%;
            height: 140px;
            object-fit: cover;
        }

        .event-info {
            padding: 14px;
        }

        .event-category {
            font-size: 11px;
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .event-rating {
            color: var(--warning);
            font-size: 12px;
        }

        .event-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .event-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 12px;
            color: var(--gray);
        }

        .event-price {
            color: var(--primary);
            font-weight: 600;
            font-size: 16px;
            margin-top: 8px;
        }

        /* Create Screen */
        .create-container {
            padding: 20px;
        }

        .create-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .create-option {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .create-option:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .create-option i {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .create-option h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .create-option p {
            color: var(--gray);
            font-size: 14px;
        }

        .recent-drafts {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .recent-drafts h3 {
            margin-bottom: 16px;
            font-size: 17px;
        }

        .draft-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid #E2E8F0;
        }

        .draft-item:last-child {
            border-bottom: none;
        }

        .draft-preview {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .draft-info h4 {
            font-size: 15px;
            margin-bottom: 4px;
        }

        .draft-info p {
            font-size: 13px;
            color: var(--gray);
        }

        /* Events Screen */
        .events-tabs {
            display: flex;
            background: white;
            padding: 0 20px;
            border-bottom: 1px solid #E2E8F0;
        }

        .event-tab {
            padding: 18px 0;
            margin-right: 30px;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            color: var(--gray);
            transition: color 0.3s;
        }

        .event-tab.active {
            color: var(--primary);
        }

        .event-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 3px 3px 0 0;
        }

        .events-list {
            padding: 20px;
        }

        .upcoming-event {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            display: flex;
            cursor: pointer;
        }

        .event-date {
            background: var(--primary);
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 80px;
        }

        .event-date .day {
            font-size: 24px;
            font-weight: 700;
            line-height: 1;
        }

        .event-date .month {
            font-size: 14px;
            font-weight: 500;
        }

        .event-content {
            padding: 18px;
            flex: 1;
        }

        .event-content h3 {
            font-size: 16px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .event-content p {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .event-participants {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .participant-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
            margin-left: -10px;
        }

        .participant-avatar:first-child {
            margin-left: 0;
        }

        .participant-count {
            font-size: 13px;
            color: var(--gray);
        }

        /* Profile Screen */
        .profile-header {
            background: white;
            padding: 30px 20px 20px;
            position: relative;
            border-bottom: 1px solid #E2E8F0;
        }

        .profile-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .profile-info {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            margin-bottom: 15px;
        }

        .profile-name {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .profile-bio {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--gray);
        }

        .profile-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #E55A2B;
        }

        .btn-outline {
            background: white;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-outline:hover {
            background: rgba(255, 107, 53, 0.08);
        }

        .profile-tabs {
            display: flex;
            background: white;
            padding: 0 20px;
            border-bottom: 1px solid #E2E8F0;
        }

        .profile-tab {
            padding: 18px 0;
            margin-right: 30px;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            color: var(--gray);
            transition: color 0.3s;
        }

        .profile-tab.active {
            color: var(--primary);
        }

        .profile-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 3px 3px 0 0;
        }

        .profile-content {
            padding: 20px;
        }

        .profile-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
        }

        .profile-post {
            aspect-ratio: 1;
            overflow: hidden;
            cursor: pointer;
        }

        .profile-post img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .profile-post:hover img {
            transform: scale(1.05);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #E2E8F0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 20px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--gray);
            cursor: pointer;
        }

        .modal-body {
            padding: 20px;
        }

        /* Responsive */
        @media (max-width: 430px) {
            body {
                border-radius: 0;
            }
        }

        /* Utility Classes */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-local {
            background: rgba(0, 168, 150, 0.1);
            color: var(--secondary);
        }

        .badge-popular {
            background: rgba(237, 137, 54, 0.1);
            color: var(--warning);
        }

        .badge-new {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .flex {
            display: flex;
        }

        .space-between {
            justify-content: space-between;
        }

        .align-center {
            align-items: center;
        }

        .text-center {
            text-align: center;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .p-20 {
            padding: 20px;
        }

        .w-100 {
            width: 100%;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-logo">
            <div class="logo-icon">
                <i class="fas fa-compass"></i>
            </div>
            <h1>LocalPal</h1>
            <p>Experiencias locales, conexiones globales</p>
        </div>

        <div class="login-form">
            <div class="form-group">
                <label for="email">Correo electr√≥nico</label>
                <input type="email" id="email" placeholder="tu@email.com">
                <div class="error-message" id="email-error"></div>
            </div>

            <div class="form-group">
                <label for="password">Contrase√±a</label>
                <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                <div class="error-message" id="password-error"></div>
            </div>

            <div class="login-options">
                <div class="remember-me">
                    <input type="checkbox" id="remember">
                    <label for="remember">Recordarme</label>
                </div>
                <a href="#" class="forgot-password" onclick="showForgotPassword()">¬øOlvidaste tu contrase√±a?</a>
            </div>

            <button class="btn-login" onclick="login()">
                <span class="btn-text">Iniciar sesi√≥n</span>
            </button>

            <div class="login-error" id="login-error">
                <i class="fas fa-exclamation-circle"></i>
                <span id="login-error-text">Credenciales incorrectas</span>
            </div>

            <div class="social-login">
                <span>O contin√∫a con</span>
                <div class="social-buttons">
                    <button class="social-btn google" onclick="socialLogin('google')">
                        <i class="fab fa-google"></i> Google
                    </button>
                    <button class="social-btn facebook" onclick="socialLogin('facebook')">
                        <i class="fab fa-facebook"></i> Facebook
                    </button>
                </div>
            </div>

            <div class="signup-link">
                ¬øNo tienes cuenta? <a href="#" onclick="showSignup()">Reg√≠strate aqu√≠</a>
            </div>

            <div class="demo-credentials">
                <h4>üë®‚Äçüíª Demo para inversores</h4>
                <p><strong>√öNICAS credenciales v√°lidas:</strong></p>
                <p>Email: <code>demo@localpal.com</code></p>
                <p>Contrase√±a: <code>demo123</code></p>
                <p style="font-size: 12px; color: var(--gray); margin-top: 8px;">
                    <i class="fas fa-exclamation-triangle"></i> Cualquier otra combinaci√≥n ser√° rechazada
                </p>
            </div>
        </div>
    </div>

    <!-- Main App (hidden initially) -->
    <div id="main-app" class="main-app">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-compass"></i>
                <span>LocalPal</span>
            </div>
            <div class="header-actions">
                <i class="far fa-bell">
                    <span class="notification-badge">3</span>
                </i>
                <i class="far fa-comments">
                    <span class="notification-badge">1</span>
                </i>
            </div>
        </div>

        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <!-- Stories -->
            <div class="stories">
                <div class="story">
                    <div class="story-avatar">
                        <img src="https://randomuser.me/api/portraits/women/32.jpg" alt="User">
                    </div>
                    <div class="story-name">Tu historia</div>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="https://randomuser.me/api/portraits/men/54.jpg" alt="User">
                    </div>
                    <div class="story-name">Carlos</div>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="https://randomuser.me/api/portraits/women/67.jpg" alt="User">
                    </div>
                    <div class="story-name">Ana</div>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="User">
                    </div>
                    <div class="story-name">Miguel</div>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="https://images.unsplash.com/photo-1540541338287-41700207dee6?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Event">
                    </div>
                    <div class="story-name">Tour Gourmet</div>
                </div>
            </div>

            <!-- Feed -->
            <div class="feed">
                <!-- Post 1 -->
                <div class="post-card">
                    <div class="post-header">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="User" class="post-avatar">
                        <div class="post-user-info">
                            <h3>Mar√≠a Garc√≠a</h3>
                            <p><i class="fas fa-map-marker-alt"></i> Plaza Mayor, Madrid ‚Ä¢ <span class="badge badge-local">Gu√≠a Local</span></p>
                        </div>
                    </div>
                    <img src="https://images.unsplash.com/photo-1541336032412-2048a678540d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Post" class="post-image">
                    <div class="post-actions">
                        <div class="post-actions-left">
                            <button class="action-btn like-btn" data-post="1">
                                <i class="far fa-heart"></i>
                            </button>
                            <button class="action-btn" onclick="openModal('comment-modal')">
                                <i class="far fa-comment"></i>
                            </button>
                            <button class="action-btn">
                                <i class="far fa-paper-plane"></i>
                            </button>
                        </div>
                        <button class="action-btn">
                            <i class="far fa-bookmark"></i>
                        </button>
                    </div>
                    <div class="post-info">
                        <div class="post-likes"><span id="like-count-1">42</span> likes</div>
                        <div class="post-caption"><strong>maria_garcia</strong> ¬°Incre√≠ble experiencia de tapas por el barrio de La Latina! √önete a mi pr√≥ximo tour gastron√≥mico este s√°bado. #Madrid #Tapas #Gu√≠aLocal</div>
                        <div class="post-time">Hace 2 horas</div>
                    </div>
                </div>

                <!-- Post 2 -->
                <div class="post-card">
                    <div class="post-header">
                        <img src="https://randomuser.me/api/portraits/men/33.jpg" alt="User" class="post-avatar">
                        <div class="post-user-info">
                            <h3>Pablo Rodr√≠guez</h3>
                            <p><i class="fas fa-map-marker-alt"></i> Barrio G√≥tico, Barcelona ‚Ä¢ <span class="badge badge-local">Gu√≠a Local</span></p>
                        </div>
                    </div>
                    <img src="https://images.unsplash.com/photo-1523531294919-4bcd7c65e216?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Post" class="post-image">
                    <div class="post-actions">
                        <div class="post-actions-left">
                            <button class="action-btn like-btn" data-post="2">
                                <i class="far fa-heart"></i>
                            </button>
                            <button class="action-btn" onclick="openModal('comment-modal')">
                                <i class="far fa-comment"></i>
                            </button>
                            <button class="action-btn">
                                <i class="far fa-paper-plane"></i>
                            </button>
                        </div>
                        <button class="action-btn">
                            <i class="far fa-bookmark"></i>
                        </button>
                    </div>
                    <div class="post-info">
                        <div class="post-likes"><span id="like-count-2">28</span> likes</div>
                        <div class="post-caption"><strong>pablo_rodriguez</strong> Descubriendo los secretos del Barrio G√≥tico de Barcelona. ¬øTe apuntas a mi ruta de historia y arquitectura? ¬°Plazas limitadas! #Barcelona #Historia #Arquitectura</div>
                        <div class="post-time">Hace 5 horas</div>
                    </div>
                </div>

                <!-- Post 3 (Event) -->
                <div class="post-card">
                    <div class="post-header">
                        <img src="https://randomuser.me/api/portraits/women/28.jpg" alt="User" class="post-avatar">
                        <div class="post-user-info">
                            <h3>Laura Mart√≠nez</h3>
                            <p><i class="fas fa-map-marker-alt"></i> Retiro, Madrid ‚Ä¢ <span class="badge badge-new">Nuevo Evento</span></p>
                        </div>
                    </div>
                    <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Post" class="post-image">
                    <div class="post-actions">
                        <div class="post-actions-left">
                            <button class="action-btn like-btn" data-post="3">
                                <i class="far fa-heart"></i>
                            </button>
                            <button class="action-btn" onclick="openModal('comment-modal')">
                                <i class="far fa-comment"></i>
                            </button>
                            <button class="action-btn">
                                <i class="far fa-paper-plane"></i>
                            </button>
                        </div>
                        <button class="action-btn">
                            <i class="far fa-bookmark"></i>
                        </button>
                    </div>
                    <div class="post-info">
                        <div class="post-likes"><span id="like-count-3">67</span> likes</div>
                        <div class="post-caption"><strong>laura_martinez</strong> üé® Taller de pintura al aire libre en el Parque del Retiro. Todos los materiales incluidos. ¬°Perfecto para principiantes! Reserva tu plaza en el evento.</div>
                        <div class="post-time">Hace 1 d√≠a</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Discover Screen (Map View - DEFAULT) -->
        <div id="discover-screen" class="screen active">
            <div class="map-container">
                <div id="map"></div>
                
                <!-- Map Controls -->
                <div class="map-controls">
                    <div class="map-search">
                        <i class="fas fa-search"></i>
                        <input type="text" id="map-search-input" placeholder="Buscar en el mapa...">
                    </div>
                    <button class="map-filters-btn" onclick="toggleFiltersPanel()">
                        <i class="fas fa-filter"></i>
                    </button>
                </div>
                
                <!-- View Toggle -->
                <div class="map-view-toggle">
                    <button class="view-toggle-btn active" onclick="switchDiscoverView('map')">
                        <i class="fas fa-map"></i>
                    </button>
                    <button class="view-toggle-btn" onclick="switchDiscoverView('list')">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
                
                <!-- Filters Panel -->
                <div class="map-filters-panel" id="filters-panel">
                    <div class="filters-header">
                        <div class="filters-title">Filtrar por</div>
                        <button class="close-filters" onclick="toggleFiltersPanel()">&times;</button>
                    </div>
                    
                    <div class="filters-categories">
                        <div class="filter-category active" onclick="toggleFilterCategory('all')">
                            <i class="fas fa-layer-group"></i> Todos
                        </div>
                        <div class="filter-category" onclick="toggleFilterCategory('food')">
                            <i class="fas fa-utensils"></i> Gastronom√≠a
                        </div>
                        <div class="filter-category" onclick="toggleFilterCategory('culture')">
                            <i class="fas fa-landmark"></i> Cultura
                        </div>
                        <div class="filter-category" onclick="toggleFilterCategory('nature')">
                            <i class="fas fa-tree"></i> Naturaleza
                        </div>
                        <div class="filter-category" onclick="toggleFilterCategory('music')">
                            <i class="fas fa-music"></i> M√∫sica
                        </div>
                        <div class="filter-category" onclick="toggleFilterCategory('history')">
                            <i class="fas fa-book"></i> Historia
                        </div>
                        <div class="filter-category" onclick="toggleFilterCategory('entertainment')">
                            <i class="fas fa-theater-masks"></i> Entretenimiento
                        </div>
                        <div class="filter-category" onclick="toggleFilterCategory('people')">
                            <i class="fas fa-users"></i> Gu√≠as Locales
                        </div>
                    </div>
                    
                    <div class="filter-slider">
                        <label>Radio de b√∫squeda: <span id="radius-value">5 km</span></label>
                        <div class="slider-container">
                            <input type="range" id="radius-slider" min="1" max="20" value="5" class="w-100">
                            <div class="slider-value" id="radius-display">5 km</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary w-100" onclick="applyFilters()">
                        Aplicar filtros
                    </button>
                </div>
            </div>
            
            <!-- Bottom Sheet for Marker Details -->
            <div class="map-bottom-sheet" id="marker-details-sheet">
                <div class="sheet-handle"></div>
                <div class="sheet-content" id="marker-details-content">
                    <!-- Content will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Discover Screen (List View) -->
        <div id="discover-list-screen" class="screen">
            <div class="discover-header">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Buscar experiencias, eventos, gu√≠as...">
                    <i class="fas fa-sliders-h" style="cursor: pointer;" onclick="toggleFiltersPanel()"></i>
                </div>
            </div>

            <div class="categories">
                <div class="category active">Todos</div>
                <div class="category">üç¥ Gastronom√≠a</div>
                <div class="category">üé® Cultura</div>
                <div class="category">üèûÔ∏è Naturaleza</div>
                <div class="category">üéµ M√∫sica</div>
                <div class="category">üèõÔ∏è Historia</div>
                <div class="category">üé≠ Entretenimiento</div>
                <div class="category">üë• Gu√≠as Locales</div>
            </div>

            <div class="events-grid">
                <!-- Event 1 -->
                <div class="event-card" onclick="openModal('event-modal')">
                    <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Event" class="event-image">
                    <div class="event-info">
                        <div class="event-category">
                            <span>üç¥ Gastronom√≠a</span>
                            <span class="event-rating"><i class="fas fa-star"></i> 4.8</span>
                        </div>
                        <div class="event-title">Tour de Tapas por La Latina</div>
                        <div class="event-meta">
                            <div><i class="far fa-calendar"></i> S√°b, 15 Jun</div>
                            <div><i class="fas fa-users"></i> 8/12 plazas</div>
                            <div><i class="fas fa-map-marker-alt"></i> 1.2 km</div>
                        </div>
                        <div class="event-price">‚Ç¨35/persona</div>
                    </div>
                </div>

                <!-- Event 2 -->
                <div class="event-card" onclick="openModal('event-modal')">
                    <img src="https://images.unsplash.com/photo-1511735111819-9a3f7709049c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Event" class="event-image">
                    <div class="event-info">
                        <div class="event-category">
                            <span>üèõÔ∏è Historia</span>
                            <span class="event-rating"><i class="fas fa-star"></i> 4.9</span>
                        </div>
                        <div class="event-title">Ruta por el Madrid de los Austrias</div>
                        <div class="event-meta">
                            <div><i class="far fa-calendar"></i> Dom, 16 Jun</div>
                            <div><i class="fas fa-users"></i> 15/20 plazas</div>
                            <div><i class="fas fa-map-marker-alt"></i> 0.8 km</div>
                        </div>
                        <div class="event-price">‚Ç¨25/persona</div>
                    </div>
                </div>

                <!-- Event 3 -->
                <div class="event-card" onclick="openModal('event-modal')">
                    <img src="https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Event" class="event-image">
                    <div class="event-info">
                        <div class="event-category">
                            <span>üé≠ Entretenimiento</span>
                            <span class="badge badge-popular">üî• Popular</span>
                        </div>
                        <div class="event-title">Noche de Flamenco en Tablao</div>
                        <div class="event-meta">
                            <div><i class="far fa-calendar"></i> Vie, 14 Jun</div>
                            <div><i class="fas fa-users"></i> 5/15 plazas</div>
                            <div><i class="fas fa-map-marker-alt"></i> 2.1 km</div>
                        </div>
                        <div class="event-price">‚Ç¨45/persona</div>
                    </div>
                </div>

                <!-- Event 4 -->
                <div class="event-card" onclick="openModal('event-modal')">
                    <img src="https://images.unsplash.com/photo-1545569341-9eb8b30979d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Event" class="event-image">
                    <div class="event-info">
                        <div class="event-category">
                            <span>üé® Cultura</span>
                            <span class="event-rating"><i class="fas fa-star"></i> 4.7</span>
                        </div>
                        <div class="event-title">Visita Guiada al Museo del Prado</div>
                        <div class="event-meta">
                            <div><i class="far fa-calendar"></i> S√°b, 15 Jun</div>
                            <div><i class="fas fa-users"></i> 12/15 plazas</div>
                            <div><i class="fas fa-map-marker-alt"></i> 3.0 km</div>
                        </div>
                        <div class="event-price">‚Ç¨30/persona</div>
                    </div>
                </div>

                <!-- Guide Card -->
                <div class="event-card" onclick="showGuideDetails('maria-garcia')">
                    <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); height: 140px; display: flex; align-items: center; justify-content: center;">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Guide" style="width: 80px; height: 80px; border-radius: 50%; border: 4px solid white; object-fit: cover;">
                    </div>
                    <div class="event-info">
                        <div class="event-category">
                            <span>üë• Gu√≠a Local</span>
                            <span class="event-rating"><i class="fas fa-star"></i> 4.8</span>
                        </div>
                        <div class="event-title">Mar√≠a Garc√≠a</div>
                        <div class="event-meta">
                            <div><i class="fas fa-map-marker-alt"></i> Madrid Centro</div>
                            <div><i class="fas fa-award"></i> 42 eventos</div>
                            <div><i class="fas fa-users"></i> 247 seguidores</div>
                        </div>
                        <div class="event-price">Especialista en gastronom√≠a</div>
                    </div>
                </div>

                <!-- Guide Card -->
                <div class="event-card" onclick="showGuideDetails('pablo-rodriguez')">
                    <div style="background: linear-gradient(135deg, var(--primary), var(--secondary)); height: 140px; display: flex; align-items: center; justify-content: center;">
                        <img src="https://randomuser.me/api/portraits/men/33.jpg" alt="Guide" style="width: 80px; height: 80px; border-radius: 50%; border: 4px solid white; object-fit: cover;">
                    </div>
                    <div class="event-info">
                        <div class="event-category">
                            <span>üë• Gu√≠a Local</span>
                            <span class="event-rating"><i class="fas fa-star"></i> 4.9</span>
                        </div>
                        <div class="event-title">Pablo Rodr√≠guez</div>
                        <div class="event-meta">
                            <div><i class="fas fa-map-marker-alt"></i> Barcelona</div>
                            <div><i class="fas fa-award"></i> 28 eventos</div>
                            <div><i class="fas fa-users"></i> 189 seguidores</div>
                        </div>
                        <div class="event-price">Especialista en historia</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Screen -->
        <div id="create-screen" class="screen">
            <div class="create-container">
                <h2 class="text-center mb-20">Crear nueva publicaci√≥n</h2>
                <div class="create-options">
                    <div class="create-option" onclick="openModal('create-post-modal')">
                        <i class="fas fa-camera"></i>
                        <h3>Publicaci√≥n</h3>
                        <p>Comparte fotos o videos con la comunidad</p>
                    </div>
                    <div class="create-option" onclick="openModal('create-event-modal')">
                        <i class="fas fa-calendar-plus"></i>
                        <h3>Evento</h3>
                        <p>Organiza una actividad o experiencia</p>
                    </div>
                </div>

                <div class="recent-drafts mt-20">
                    <h3>Borradores recientes</h3>
                    <div class="draft-item">
                        <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Draft" class="draft-preview">
                        <div class="draft-info">
                            <h4>Cena de degustaci√≥n vegana</h4>
                            <p>Guardado hace 2 d√≠as</p>
                        </div>
                    </div>
                    <div class="draft-item">
                        <img src="https://images.unsplash.com/photo-1519677100203-4f3c1f0f8c7f?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Draft" class="draft-preview">
                        <div class="draft-info">
                            <h4>Tour street art en Malasa√±a</h4>
                            <p>Guardado hace 1 semana</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Events Screen -->
        <div id="events-screen" class="screen">
            <div class="events-tabs">
                <div class="event-tab active" onclick="switchEventTab('upcoming')">Pr√≥ximos</div>
                <div class="event-tab" onclick="switchEventTab('nearby')">Cercanos</div>
                <div class="event-tab" onclick="switchEventTab('confirmed')">Confirmados</div>
                <div class="event-tab" onclick="switchEventTab('hosting')">Organizando</div>
            </div>

            <div class="events-list">
                <!-- Event 1 -->
                <div class="upcoming-event" onclick="openModal('event-detail-modal')">
                    <div class="event-date">
                        <div class="day">15</div>
                        <div class="month">JUN</div>
                    </div>
                    <div class="event-content">
                        <h3>Tour de Tapas por La Latina</h3>
                        <p><i class="far fa-clock"></i> 20:00 - 23:00</p>
                        <p><i class="fas fa-map-marker-alt"></i> Plaza de la Cebada, Madrid</p>
                        <div class="event-participants">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Participant" class="participant-avatar">
                            <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Participant" class="participant-avatar">
                            <img src="https://randomuser.me/api/portraits/women/67.jpg" alt="Participant" class="participant-avatar">
                            <div class="participant-count">+5 asistentes</div>
                        </div>
                    </div>
                </div>

                <!-- Event 2 -->
                <div class="upcoming-event" onclick="openModal('event-detail-modal')">
                    <div class="event-date">
                        <div class="day">16</div>
                        <div class="month">JUN</div>
                    </div>
                    <div class="event-content">
                        <h3>Ruta por el Madrid de los Austrias</h3>
                        <p><i class="far fa-clock"></i> 11:00 - 14:00</p>
                        <p><i class="fas fa-map-marker-alt"></i> Plaza Mayor, Madrid</p>
                        <div class="event-participants">
                            <img src="https://randomuser.me/api/portraits/men/33.jpg" alt="Participant" class="participant-avatar">
                            <img src="https://randomuser.me/api/portraits/women/28.jpg" alt="Participant" class="participant-avatar">
                            <img src="https://randomuser.me/api/portraits/men/54.jpg" alt="Participant" class="participant-avatar">
                            <div class="participant-count">+12 asistentes</div>
                        </div>
                    </div>
                </div>

                <!-- Event 3 -->
                <div class="upcoming-event" onclick="openModal('event-detail-modal')">
                    <div class="event-date">
                        <div class="day">14</div>
                        <div class="month">JUN</div>
                    </div>
                    <div class="event-content">
                        <h3>Noche de Flamenco en Tablao</h3>
                        <p><i class="far fa-clock"></i> 22:00 - 01:00</p>
                        <p><i class="fas fa-map-marker-alt"></i> Calle de las Huertas, Madrid</p>
                        <div class="event-participants">
                            <img src="https://randomuser.me/api/portraits/women/32.jpg" alt="Participant" class="participant-avatar">
                            <img src="https://randomuser.me/api/portraits/men/41.jpg" alt="Participant" class="participant-avatar">
                            <div class="participant-count">+3 asistentes</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div id="profile-screen" class="screen">
            <div class="profile-header">
                <div class="profile-banner"></div>
                <div class="profile-info">
                    <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="User" class="profile-avatar">
                    <div class="profile-name">Alejandro P√©rez</div>
                    <div class="profile-bio">Gu√≠a local en Madrid ‚Ä¢ Amante de la gastronom√≠a y la historia ‚Ä¢ Organizando experiencias √∫nicas desde 2020</div>
                    <div class="profile-stats">
                        <div class="stat">
                            <div class="stat-value">247</div>
                            <div class="stat-label">Seguidores</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">156</div>
                            <div class="stat-label">Siguiendo</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">42</div>
                            <div class="stat-label">Eventos</div>
                        </div>
                    </div>
                    <div class="profile-actions">
                        <button class="btn btn-outline">Editar perfil</button>
                        <button class="btn btn-primary">Compartir perfil</button>
                    </div>
                </div>
            </div>

            <div class="profile-tabs">
                <div class="profile-tab active" onclick="switchProfileTab('posts')">Publicaciones</div>
                <div class="profile-tab" onclick="switchProfileTab('events')">Eventos</div>
                <div class="profile-tab" onclick="switchProfileTab('saved')">Guardados</div>
                <div class="profile-tab" onclick="switchProfileTab('achievements')">Logros</div>
            </div>

            <div class="profile-content">
                <div id="profile-posts" class="profile-tab-content">
                    <div class="profile-grid">
                        <div class="profile-post">
                            <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Post">
                        </div>
                        <div class="profile-post">
                            <img src="https://images.unsplash.com/photo-1511735111819-9a3f7709049c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Post">
                        </div>
                        <div class="profile-post">
                            <img src="https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Post">
                        </div>
                        <div class="profile-post">
                            <img src="https://images.unsplash.com/photo-1545569341-9eb8b30979d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Post">
                        </div>
                        <div class="profile-post">
                            <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Post">
                        </div>
                        <div class="profile-post">
                            <img src="https://images.unsplash.com/photo-1519677100203-4f3c1f0f8c7f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Post">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item" onclick="switchScreen('home-screen')">
                <i class="fas fa-home"></i>
                <span>Inicio</span>
            </div>
            <div class="nav-item active" onclick="switchScreen('discover-screen')">
                <i class="fas fa-compass"></i>
                <span>Descubrir</span>
            </div>
            <div class="create-button" onclick="switchScreen('create-screen')">
                <i class="fas fa-plus"></i>
            </div>
            <div class="nav-item" onclick="switchScreen('events-screen')">
                <i class="fas fa-calendar-alt"></i>
                <span>Eventos</span>
            </div>
            <div class="nav-item" onclick="switchScreen('profile-screen')">
                <i class="fas fa-user"></i>
                <span>Perfil</span>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Event Detail Modal -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Tour de Tapas por La Latina</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Event" style="width: 100%; height: 200px; object-fit: cover; border-radius: 12px; margin-bottom: 20px;">
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <div style="font-size: 24px; font-weight: 700; color: var(--primary);">‚Ç¨35</div>
                        <div style="font-size: 14px; color: var(--gray);">por persona</div>
                    </div>
                    <div style="background: rgba(72, 187, 120, 0.1); color: var(--success); padding: 8px 16px; border-radius: 20px; font-weight: 600;">
                        <i class="fas fa-users"></i> 8/12 plazas
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 10px;">Descripci√≥n</h3>
                    <p style="color: var(--gray); line-height: 1.6;">Descubre los sabores aut√©nticos de Madrid en este tour de tapas por el hist√≥rico barrio de La Latina. Visitaremos 4 bares tradicionales donde probaremos las mejores tapas acompa√±adas de vinos espa√±oles. Una experiencia gastron√≥mica √∫nica con gu√≠a local experto.</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div style="background: var(--light); padding: 12px; border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">Fecha</div>
                        <div style="font-weight: 600;">S√°b, 15 Jun 2024</div>
                    </div>
                    <div style="background: var(--light); padding: 12px; border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">Hora</div>
                        <div style="font-weight: 600;">20:00 - 23:00</div>
                    </div>
                    <div style="background: var(--light); padding: 12px; border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">Duraci√≥n</div>
                        <div style="font-weight: 600;">3 horas</div>
                    </div>
                    <div style="background: var(--light); padding: 12px; border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">Idioma</div>
                        <div style="font-weight: 600;">Espa√±ol/Ingl√©s</div>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 10px;">Gu√≠a</h3>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Guide" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <div style="font-weight: 600;">Mar√≠a Garc√≠a</div>
                            <div style="font-size: 14px; color: var(--gray); display: flex; align-items: center; gap: 5px;">
                                <i class="fas fa-star" style="color: var(--warning);"></i>
                                4.8 (142 rese√±as) ‚Ä¢ <span class="badge badge-local">Gu√≠a Local</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary w-100" style="padding: 16px; font-size: 16px;" onclick="bookEvent()">
                    <i class="fas fa-ticket-alt"></i> Reservar plaza
                </button>
            </div>
        </div>
    </div>

    <!-- Guide Detail Modal -->
    <div id="guide-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="guide-name">Mar√≠a Garc√≠a</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 25px;">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Guide" id="guide-avatar" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover;">
                    <div>
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">Gu√≠a Local Verificada</div>
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                            <div style="color: var(--warning);">
                                <i class="fas fa-star"></i> <span id="guide-rating">4.8</span>
                            </div>
                            <div style="font-size: 14px; color: var(--gray);">
                                (<span id="guide-reviews">142</span> rese√±as)
                            </div>
                        </div>
                        <div style="font-size: 14px; color: var(--gray);">
                            <i class="fas fa-map-marker-alt"></i> <span id="guide-location">Madrid Centro</span>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 10px;">Biograf√≠a</h3>
                    <p style="color: var(--gray); line-height: 1.6;" id="guide-bio">Madrile√±a de nacimiento y apasionada de la gastronom√≠a tradicional. Con m√°s de 5 a√±os de experiencia como gu√≠a, he dise√±ado experiencias √∫nicas que muestran la aut√©ntica esencia de Madrid a trav√©s de sus sabores.</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div style="background: var(--light); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 20px; font-weight: 700; color: var(--primary);" id="guide-events">42</div>
                        <div style="font-size: 13px; color: var(--gray);">Eventos</div>
                    </div>
                    <div style="background: var(--light); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 20px; font-weight: 700; color: var(--primary);" id="guide-followers">247</div>
                        <div style="font-size: 13px; color: var(--gray);">Seguidores</div>
                    </div>
                    <div style="background: var(--light); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 20px; font-weight: 700; color: var(--primary);">Desde 2020</div>
                        <div style="font-size: 13px; color: var(--gray);">Activo</div>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 10px;">Especialidades</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                        <span style="background: rgba(255, 107, 53, 0.1); color: var(--primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 500;">üç¥ Gastronom√≠a</span>
                        <span style="background: rgba(0, 168, 150, 0.1); color: var(--secondary); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 500;">üèõÔ∏è Historia</span>
                        <span style="background: rgba(72, 187, 120, 0.1); color: var(--success); padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 500;">üö∂‚Äç‚ôÄÔ∏è Rutas a pie</span>
                    </div>
                </div>

                <button class="btn btn-primary w-100" style="padding: 16px; font-size: 16px;" onclick="followGuide()">
                    <i class="fas fa-user-plus"></i> Seguir gu√≠a
                </button>
            </div>
        </div>
    </div>

    <!-- Create Post Modal -->
    <div id="create-post-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Nueva publicaci√≥n</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <div style="background: var(--light); border-radius: 12px; padding: 30px; text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 50px; color: var(--primary); margin-bottom: 15px;"></i>
                        <div style="font-weight: 600; margin-bottom: 10px;">Sube tus fotos o videos</div>
                        <div style="color: var(--gray); margin-bottom: 20px;">Arrastra archivos aqu√≠ o haz clic para seleccionar</div>
                        <button class="btn btn-outline" style="width: auto;">Seleccionar archivos</button>
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Descripci√≥n</label>
                    <textarea style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px; min-height: 100px; resize: vertical;" placeholder="¬øQu√© quieres compartir?"></textarea>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Etiquetas</label>
                    <input type="text" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;" placeholder="#madrid #tapas #gastronomia">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ubicaci√≥n</label>
                    <input type="text" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;" placeholder="A√±adir ubicaci√≥n">
                </div>

                <button class="btn btn-primary w-100" onclick="createPost()">Publicar</button>
            </div>
        </div>
    </div>

    <!-- Create Event Modal -->
    <div id="create-event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Crear nuevo evento</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">T√≠tulo del evento</label>
                    <input type="text" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;" placeholder="Ej: Tour de tapas por La Latina">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Descripci√≥n</label>
                    <textarea style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px; min-height: 100px; resize: vertical;" placeholder="Describe tu evento en detalle..."></textarea>
                </div>

                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Fecha</label>
                        <input type="date" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Hora</label>
                        <input type="time" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;">
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ubicaci√≥n</label>
                    <input type="text" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;" placeholder="Direcci√≥n o punto de encuentro">
                </div>

                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Precio (‚Ç¨)</label>
                        <input type="number" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;" placeholder="0 para gratuito">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Plazas</label>
                        <input type="number" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;" placeholder="M√°ximo participantes">
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Categor√≠a</label>
                    <select style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 10px;">
                        <option>üç¥ Gastronom√≠a</option>
                        <option>üé® Cultura</option>
                        <option>üèûÔ∏è Naturaleza</option>
                        <option>üéµ M√∫sica</option>
                        <option>üèõÔ∏è Historia</option>
                    </select>
                </div>

                <button class="btn btn-primary w-100" onclick="createEvent()">Crear evento</button>
            </div>
        </div>
    </div>

    <!-- Comment Modal -->
    <div id="comment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Comentarios</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                        <img src="https://randomuser.me/api/portraits/women/32.jpg" alt="User" style="width: 40px; height: 40px; border-radius: 50%;">
                        <div style="flex: 1;">
                            <input type="text" style="width: 100%; padding: 12px; border: 1px solid #E2E8F0; border-radius: 20px;" placeholder="A√±ade un comentario...">
                        </div>
                    </div>

                    <div style="max-height: 300px; overflow-y: auto;">
                        <!-- Comment 1 -->
                        <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                            <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="User" style="width: 36px; height: 36px; border-radius: 50%;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Miguel Torres</div>
                                <div style="margin-bottom: 6px;">¬°Qu√© buena pinta tiene todo! Me encantar√≠a apuntarme al pr√≥ximo tour.</div>
                                <div style="font-size: 12px; color: var(--gray); display: flex; align-items: center; gap: 15px;">
                                    <span>Hace 2 horas</span>
                                    <button style="background: none; border: none; color: var(--gray); cursor: pointer;">Responder</button>
                                    <button style="background: none; border: none; color: var(--gray); cursor: pointer;"><i class="far fa-heart"></i> 3</button>
                                </div>
                            </div>
                        </div>

                        <!-- Comment 2 -->
                        <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                            <img src="https://randomuser.me/api/portraits/women/67.jpg" alt="User" style="width: 36px; height: 36px; border-radius: 50%;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; margin-bottom: 4px;">Ana L√≥pez</div>
                                <div style="margin-bottom: 6px;">Yo fui la semana pasada y fue una experiencia incre√≠ble. ¬°Totalmente recomendable!</div>
                                <div style="font-size: 12px; color: var(--gray); display: flex; align-items: center; gap: 15px;">
                                    <span>Hace 3 horas</span>
                                    <button style="background: none; border: none; color: var(--gray); cursor: pointer;">Responder</button>
                                    <button style="background: none; border: none; color: var(--gray); cursor: pointer;"><i class="fas fa-heart" style="color: var(--primary);"></i> 7</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Success Modal -->
    <div id="booking-modal" class="modal">
        <div class="modal-content" style="max-width: 350px;">
            <div class="modal-body" style="text-align: center; padding: 40px 30px;">
                <div style="background: rgba(72, 187, 120, 0.1); color: var(--success); width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px;">
                    <i class="fas fa-check" style="font-size: 30px;"></i>
                </div>
                <h2 style="margin-bottom: 15px;">¬°Reserva confirmada!</h2>
                <p style="color: var(--gray); margin-bottom: 25px; line-height: 1.5;">Tu plaza para el "Tour de Tapas por La Latina" ha sido reservada. Recibir√°s los detalles por mensaje privado.</p>
                <button class="btn btn-primary" onclick="closeModal()" style="width: 100%;">Continuar</button>
            </div>
        </div>
    </div>

    <!-- Logout Modal -->
    <div id="logout-modal" class="modal">
        <div class="modal-content" style="max-width: 350px;">
            <div class="modal-body" style="text-align: center; padding: 40px 30px;">
                <div style="background: rgba(245, 101, 101, 0.1); color: var(--danger); width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px;">
                    <i class="fas fa-sign-out-alt" style="font-size: 30px;"></i>
                </div>
                <h2 style="margin-bottom: 15px;">¬øCerrar sesi√≥n?</h2>
                <p style="color: var(--gray); margin-bottom: 25px; line-height: 1.5;">¬øEst√°s seguro de que quieres cerrar sesi√≥n en LocalPal?</p>
                <div style="display: flex; gap: 15px;">
                    <button class="btn btn-outline" onclick="closeModal()" style="flex: 1;">Cancelar</button>
                    <button class="btn btn-primary" onclick="logout()" style="flex: 1; background: var(--danger);">Cerrar sesi√≥n</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgot-password-modal" class="modal">
        <div class="modal-content" style="max-width: 350px;">
            <div class="modal-header">
                <h2>Recuperar contrase√±a</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--gray);">Introduce tu correo electr√≥nico y te enviaremos un enlace para restablecer tu contrase√±a.</p>
                <div class="form-group">
                    <label for="recovery-email">Correo electr√≥nico</label>
                    <input type="email" id="recovery-email" placeholder="tu@email.com">
                </div>
                <button class="btn btn-primary w-100" onclick="sendRecoveryEmail()">Enviar enlace de recuperaci√≥n</button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // VARIABLES GLOBALES DEL MAPA
        // ============================================
        let map = null;
        let markers = [];
        let userMarker = null;
        let currentFilters = {
            categories: ['all'],
            radius: 5
        };
        let activeDiscoverView = 'map'; // 'map' or 'list'

        // ============================================
        // DATOS DE DEMO PARA EL MAPA
        // ============================================
        const mapData = {
            events: [
                {
                    id: 1,
                    title: "Tour de Tapas por La Latina",
                    category: "food",
                    latitude: 40.413,
                    longitude: -3.703,
                    price: 35,
                    rating: 4.8,
                    participants: "8/12",
                    date: "S√°b, 15 Jun",
                    distance: "1.2 km",
                    icon: "üç¥",
                    color: "marker-food",
                    image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                    description: "Descubre los sabores aut√©nticos de Madrid en este tour de tapas por el hist√≥rico barrio de La Latina."
                },
                {
                    id: 2,
                    title: "Ruta por el Madrid de los Austrias",
                    category: "history",
                    latitude: 40.415,
                    longitude: -3.707,
                    price: 25,
                    rating: 4.9,
                    participants: "15/20",
                    date: "Dom, 16 Jun",
                    distance: "0.8 km",
                    icon: "üèõÔ∏è",
                    color: "marker-history",
                    image: "https://images.unsplash.com/photo-1511735111819-9a3f7709049c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                    description: "Recorre las calles del Madrid hist√≥rico donde los reyes de la Casa de Austria dejaron su huella."
                },
                {
                    id: 3,
                    title: "Noche de Flamenco en Tablao",
                    category: "entertainment",
                    latitude: 40.411,
                    longitude: -3.699,
                    price: 45,
                    rating: 4.7,
                    participants: "5/15",
                    date: "Vie, 14 Jun",
                    distance: "2.1 km",
                    icon: "üíÉ",
                    color: "marker-entertainment",
                    image: "https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                    description: "Una aut√©ntica experiencia de flamenco en uno de los tablaos m√°s famosos de Madrid."
                },
                {
                    id: 4,
                    title: "Visita Guiada al Museo del Prado",
                    category: "culture",
                    latitude: 40.418,
                    longitude: -3.694,
                    price: 30,
                    rating: 4.7,
                    participants: "12/15",
                    date: "S√°b, 15 Jun",
                    distance: "3.0 km",
                    icon: "üé®",
                    color: "marker-culture",
                    image: "https://images.unsplash.com/photo-1545569341-9eb8b30979d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                    description: "Recorrido exclusivo por las obras maestras del Museo del Prado con gu√≠a experto."
                },
                {
                    id: 5,
                    title: "Senderismo en la Sierra de Guadarrama",
                    category: "nature",
                    latitude: 40.750,
                    longitude: -3.996,
                    price: 20,
                    rating: 4.9,
                    participants: "10/15",
                    date: "Dom, 16 Jun",
                    distance: "45 km",
                    icon: "üèûÔ∏è",
                    color: "marker-nature",
                    image: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                    description: "Ruta de senderismo por los paisajes m√°s impresionantes de la Sierra de Guadarrama."
                },
                {
                    id: 6,
                    title: "Concierto de Jazz en Caf√© Central",
                    category: "music",
                    latitude: 40.416,
                    longitude: -3.702,
                    price: 25,
                    rating: 4.6,
                    participants: "18/30",
                    date: "S√°b, 15 Jun",
                    distance: "1.5 km",
                    icon: "üéµ",
                    color: "marker-music",
                    image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                    description: "Noche de jazz en vivo en el m√≠tico Caf√© Central de Madrid."
                }
            ],
            guides: [
                {
                    id: 101,
                    name: "Mar√≠a Garc√≠a",
                    category: "people",
                    latitude: 40.414,
                    longitude: -3.700,
                    rating: 4.8,
                    events: 42,
                    followers: 247,
                    icon: "üë©",
                    color: "marker-user",
                    image: "https://randomuser.me/api/portraits/women/44.jpg",
                    specialty: "Gastronom√≠a",
                    location: "Madrid Centro"
                },
                {
                    id: 102,
                    name: "Pablo Rodr√≠guez",
                    category: "people",
                    latitude: 40.417,
                    longitude: -3.705,
                    rating: 4.9,
                    events: 28,
                    followers: 189,
                    icon: "üë®",
                    color: "marker-user",
                    image: "https://randomuser.me/api/portraits/men/33.jpg",
                    specialty: "Historia",
                    location: "Madrid"
                },
                {
                    id: 103,
                    name: "Laura Mart√≠nez",
                    category: "people",
                    latitude: 40.410,
                    longitude: -3.695,
                    rating: 4.7,
                    events: 35,
                    followers: 156,
                    icon: "üë©",
                    color: "marker-user",
                    image: "https://randomuser.me/api/portraits/women/28.jpg",
                    specialty: "Arte y Cultura",
                    location: "Madrid"
                }
            ],
            userLocation: {
                latitude: 40.4168,
                longitude: -3.7038
            }
        };

        // ============================================
        // INICIALIZACI√ìN DEL MAPA
        // ============================================
        function initMap() {
            // Crear mapa centrado en Madrid
            map = L.map('map').setView([40.4168, -3.7038], 14);
            
            // A√±adir capa de OpenStreetMap
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors',
                maxZoom: 19
            }).addTo(map);
            
            // A√±adir marcador de usuario
            userMarker = L.marker([mapData.userLocation.latitude, mapData.userLocation.longitude], {
                icon: L.divIcon({
                    className: 'custom-marker marker-user',
                    html: '<i class="fas fa-user"></i>',
                    iconSize: [40, 40],
                    iconAnchor: [20, 40]
                })
            }).addTo(map)
            .bindPopup('<strong>Tu ubicaci√≥n</strong><br>Madrid, Espa√±a')
            .openPopup();
            
            // A√±adir todos los marcadores
            addAllMarkers();
            
            // A√±adir c√≠rculo de radio
            addRadiusCircle();
        }
        
        // ============================================
        // FUNCIONES DEL MAPA
        // ============================================
        function addAllMarkers() {
            // Limpiar marcadores existentes
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];
            
            // A√±adir eventos
            mapData.events.forEach(event => {
                if (shouldShowMarker(event.category)) {
                    const marker = L.marker([event.latitude, event.longitude], {
                        icon: L.divIcon({
                            className: `custom-marker ${event.color}`,
                            html: event.icon,
                            iconSize: [40, 40],
                            iconAnchor: [20, 40]
                        })
                    }).addTo(map);
                    
                    marker.bindPopup(`
                        <strong>${event.title}</strong><br>
                        <small>${getCategoryName(event.category)} ‚Ä¢ ${event.distance}</small>
                    `);
                    
                    marker.on('click', () => showMarkerDetails(event));
                    
                    markers.push(marker);
                }
            });
            
            // A√±adir gu√≠as
            mapData.guides.forEach(guide => {
                if (shouldShowMarker(guide.category)) {
                    const marker = L.marker([guide.latitude, guide.longitude], {
                        icon: L.divIcon({
                            className: `custom-marker ${guide.color}`,
                            html: guide.icon,
                            iconSize: [40, 40],
                            iconAnchor: [20, 40]
                        })
                    }).addTo(map);
                    
                    marker.bindPopup(`
                        <strong>${guide.name}</strong><br>
                        <small>Gu√≠a Local ‚Ä¢ ${guide.specialty}</small>
                    `);
                    
                    marker.on('click', () => showGuideDetails(guide.id));
                    
                    markers.push(marker);
                }
            });
        }
        
        function addRadiusCircle() {
            // Eliminar c√≠rculo anterior si existe
            if (window.radiusCircle) {
                map.removeLayer(window.radiusCircle);
            }
            
            // Crear nuevo c√≠rculo
            window.radiusCircle = L.circle([mapData.userLocation.latitude, mapData.userLocation.longitude], {
                color: 'var(--primary)',
                fillColor: 'var(--primary)',
                fillOpacity: 0.1,
                radius: currentFilters.radius * 1000 // Convertir km a metros
            }).addTo(map);
        }
        
        function shouldShowMarker(category) {
            return currentFilters.categories.includes('all') || currentFilters.categories.includes(category);
        }
        
        function getCategoryName(category) {
            const categories = {
                'food': 'üç¥ Gastronom√≠a',
                'culture': 'üé® Cultura',
                'nature': 'üèûÔ∏è Naturaleza',
                'music': 'üéµ M√∫sica',
                'history': 'üèõÔ∏è Historia',
                'entertainment': 'üé≠ Entretenimiento',
                'people': 'üë• Gu√≠as Locales'
            };
            return categories[category] || category;
        }
        
        // ============================================
        // FUNCIONES DE LA INTERFAZ DEL MAPA
        // ============================================
        function showMarkerDetails(data) {
            const isEvent = data.hasOwnProperty('price');
            const content = document.getElementById('marker-details-content');
            
            if (isEvent) {
                content.innerHTML = `
                    <h3>${data.title}</h3>
                    <div class="map-marker-preview">
                        <img src="${data.image}" alt="${data.title}" class="marker-preview-image">
                        <div class="marker-preview-info">
                            <div class="marker-preview-category">${getCategoryName(data.category)}</div>
                            <div class="marker-preview-meta">
                                <span><i class="far fa-calendar"></i> ${data.date}</span>
                                <span><i class="fas fa-users"></i> ${data.participants} plazas</span>
                                <span><i class="fas fa-map-marker-alt"></i> ${data.distance}</span>
                            </div>
                            <div class="marker-preview-meta">
                                <span><i class="fas fa-star" style="color: var(--warning);"></i> ${data.rating}</span>
                            </div>
                            <div class="marker-preview-price">‚Ç¨${data.price}/persona</div>
                        </div>
                    </div>
                    <p style="color: var(--gray); margin-bottom: 20px;">${data.description}</p>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="saveEvent(${data.id})">
                            <i class="far fa-bookmark"></i> Guardar
                        </button>
                        <button class="btn btn-primary" style="flex: 2;" onclick="bookEventFromMap(${data.id})">
                            <i class="fas fa-ticket-alt"></i> Reservar ahora
                        </button>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <h3>${data.name}</h3>
                    <div class="map-marker-preview">
                        <img src="${data.image}" alt="${data.name}" class="marker-preview-image" style="border-radius: 50%;">
                        <div class="marker-preview-info">
                            <div class="marker-preview-category">üë• Gu√≠a Local</div>
                            <div class="marker-preview-meta">
                                <span><i class="fas fa-map-marker-alt"></i> ${data.location}</span>
                                <span><i class="fas fa-award"></i> ${data.events} eventos</span>
                            </div>
                            <div class="marker-preview-meta">
                                <span><i class="fas fa-star" style="color: var(--warning);"></i> ${data.rating}</span>
                                <span><i class="fas fa-users"></i> ${data.followers} seguidores</span>
                            </div>
                            <div class="marker-preview-price">${data.specialty}</div>
                        </div>
                    </div>
                    <p style="color: var(--gray); margin-bottom: 20px;">Gu√≠a local especializado en ${data.specialty.toLowerCase()} con excelentes rese√±as.</p>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="messageGuide(${data.id})">
                            <i class="far fa-comment"></i> Mensaje
                        </button>
                        <button class="btn btn-primary" style="flex: 2;" onclick="followGuideFromMap(${data.id})">
                            <i class="fas fa-user-plus"></i> Seguir gu√≠a
                        </button>
                    </div>
                `;
            }
            
            // Mostrar bottom sheet
            document.getElementById('marker-details-sheet').classList.add('active');
        }
        
        function toggleFiltersPanel() {
            const panel = document.getElementById('filters-panel');
            panel.classList.toggle('active');
        }
        
        function toggleFilterCategory(category) {
            const element = document.querySelector(`[onclick="toggleFilterCategory('${category}')"]`);
            element.classList.toggle('active');
            
            if (category === 'all') {
                // Si se selecciona "Todos", deseleccionar todas las dem√°s categor√≠as
                document.querySelectorAll('.filter-category:not([onclick="toggleFilterCategory(\'all\')"])').forEach(el => {
                    el.classList.remove('active');
                });
                currentFilters.categories = ['all'];
            } else {
                // Deseleccionar "Todos" si se selecciona una categor√≠a espec√≠fica
                document.querySelector('[onclick="toggleFilterCategory(\'all\')"]').classList.remove('active');
                
                // Actualizar lista de categor√≠as activas
                const activeCategories = Array.from(document.querySelectorAll('.filter-category.active'))
                    .map(el => {
                        const onclick = el.getAttribute('onclick');
                        const match = onclick.match(/toggleFilterCategory\('(.+)'\)/);
                        return match ? match[1] : null;
                    })
                    .filter(cat => cat !== null);
                
                currentFilters.categories = activeCategories.length > 0 ? activeCategories : ['all'];
            }
        }
        
        function updateRadiusDisplay() {
            const slider = document.getElementById('radius-slider');
            const display = document.getElementById('radius-display');
            const value = document.getElementById('radius-value');
            
            const radius = parseInt(slider.value);
            display.textContent = `${radius} km`;
            value.textContent = `${radius} km`;
            currentFilters.radius = radius;
        }
        
        function applyFilters() {
            // Actualizar c√≠rculo de radio
            addRadiusCircle();
            
            // Actualizar marcadores
            addAllMarkers();
            
            // Cerrar panel
            toggleFiltersPanel();
            
            showNotification('Filtros aplicados');
        }
        
        function switchDiscoverView(view) {
            const mapBtn = document.querySelector('[onclick="switchDiscoverView(\'map\')"]');
            const listBtn = document.querySelector('[onclick="switchDiscoverView(\'list\')"]');
            const mapScreen = document.getElementById('discover-screen');
            const listScreen = document.getElementById('discover-list-screen');
            
            if (view === 'map' && activeDiscoverView !== 'map') {
                // Cambiar a vista mapa
                mapBtn.classList.add('active');
                listBtn.classList.remove('active');
                mapScreen.classList.add('active');
                listScreen.classList.remove('active');
                activeDiscoverView = 'map';
                
                // Re-inicializar mapa si es necesario
                if (!map) {
                    initMap();
                }
            } else if (view === 'list' && activeDiscoverView !== 'list') {
                // Cambiar a vista lista
                mapBtn.classList.remove('active');
                listBtn.classList.add('active');
                mapScreen.classList.remove('active');
                listScreen.classList.add('active');
                activeDiscoverView = 'list';
            }
        }
        
        // ============================================
        // FUNCIONES DE INTERACCI√ìN CON MARCADORES
        // ============================================
        function bookEventFromMap(eventId) {
            closeMarkerDetails();
            setTimeout(() => {
                openModal('booking-modal');
            }, 300);
        }
        
        function saveEvent(eventId) {
            closeMarkerDetails();
            showNotification('Evento guardado en favoritos');
        }
        
        function followGuideFromMap(guideId) {
            closeMarkerDetails();
            showNotification('Ahora sigues a este gu√≠a');
        }
        
        function messageGuide(guideId) {
            closeMarkerDetails();
            showNotification('Redirigiendo a mensajes...');
        }
        
        function closeMarkerDetails() {
            document.getElementById('marker-details-sheet').classList.remove('active');
        }
        
        // ============================================
        // FUNCIONES DE LOGIN (MANTENIDAS)
        // ============================================
        const VALID_CREDENTIALS = [
            {
                email: "demo@localpal.com",
                password: "demo123",
                name: "Demo User"
            },
            {
                email: "inversor@localpal.com",
                password: "invertir2024",
                name: "Inversor"
            },
            {
                email: "guia@localpal.com",
                password: "guia123",
                name: "Gu√≠a Local"
            }
        ];
        
        function login() {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const loginBtn = document.querySelector('.btn-login');
            const loginError = document.getElementById('login-error');
            const emailError = document.getElementById('email-error');
            const passwordError = document.getElementById('password-error');
            
            // Reset errores
            loginError.classList.remove('show');
            emailError.style.display = 'none';
            passwordError.style.display = 'none';
            document.getElementById('email').classList.remove('error');
            document.getElementById('password').classList.remove('error');
            
            // Validaciones b√°sicas
            if (!email) {
                document.getElementById('email').classList.add('error');
                emailError.textContent = 'El correo electr√≥nico es obligatorio';
                emailError.style.display = 'block';
                return;
            }
            
            if (!password) {
                document.getElementById('password').classList.add('error');
                passwordError.textContent = 'La contrase√±a es obligatoria';
                passwordError.style.display = 'block';
                return;
            }
            
            if (!isValidEmail(email)) {
                document.getElementById('email').classList.add('error');
                emailError.textContent = 'Formato de email inv√°lido';
                emailError.style.display = 'block';
                return;
            }
            
            // Mostrar loading
            loginBtn.classList.add('loading');
            
            // Simular petici√≥n al servidor
            setTimeout(() => {
                // Verificar credenciales
                const isValid = validateCredentials(email, password);
                
                if (isValid) {
                    // Credenciales correctas
                    loginSuccess(email);
                } else {
                    // Credenciales incorrectas
                    loginFailed();
                }
                
                // Quitar loading
                loginBtn.classList.remove('loading');
            }, 1500);
        }
        
        function validateCredentials(email, password) {
            return VALID_CREDENTIALS.some(cred => 
                cred.email.toLowerCase() === email.toLowerCase() && 
                cred.password === password
            );
        }
        
        function loginSuccess(email) {
            document.getElementById('login-screen').classList.add('hidden');
            
            setTimeout(() => {
                document.getElementById('main-app').classList.add('active');
                document.getElementById('login-screen').style.display = 'none';
                
                // Inicializar mapa despu√©s del login
                setTimeout(() => {
                    if (activeDiscoverView === 'map') {
                        initMap();
                    }
                }, 100);
                
                const userName = getUserName(email);
                showNotification(`¬°Bienvenido a LocalPal, ${userName}!`);
            }, 500);
        }
        
        function loginFailed() {
            const loginError = document.getElementById('login-error');
            const loginErrorText = document.getElementById('login-error-text');
            
            const errorMessages = [
                'Credenciales incorrectas',
                'Email o contrase√±a inv√°lidos',
                'Acceso denegado',
                'Verifica tus credenciales'
            ];
            
            const randomError = errorMessages[Math.floor(Math.random() * errorMessages.length)];
            loginErrorText.textContent = randomError;
            
            loginError.classList.add('show');
            document.getElementById('email').classList.add('error');
            document.getElementById('password').classList.add('error');
            
            const loginBtn = document.querySelector('.btn-login');
            loginBtn.style.animation = 'shake 0.5s ease-in-out';
            setTimeout(() => {
                loginBtn.style.animation = '';
            }, 500);
            
            document.getElementById('password').value = '';
            document.getElementById('email').focus();
        }
        
        // ============================================
        // FUNCIONES DE NAVEGACI√ìN Y UTILIDAD
        // ============================================
        function switchScreen(screenId) {
            // Actualizar navegaci√≥n inferior
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navMap = {
                'home-screen': 0,
                'discover-screen': 1,
                'create-screen': 2,
                'events-screen': 3,
                'profile-screen': 4
            };
            
            if (navMap[screenId] !== undefined) {
                document.querySelectorAll('.nav-item')[navMap[screenId]].classList.add('active');
            }
            
            // Ocultar todas las pantallas
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Mostrar pantalla seleccionada
            document.getElementById(screenId).classList.add('active');
            
            // Si vamos a Discover y est√° en vista mapa, inicializar mapa si no est√° inicializado
            if (screenId === 'discover-screen' && activeDiscoverView === 'map' && !map) {
                setTimeout(() => {
                    initMap();
                }, 100);
            }
            
            // Cerrar bottom sheet si est√° abierto
            closeMarkerDetails();
        }
        
        function showGuideDetails(guideId) {
            const guide = mapData.guides.find(g => g.id == guideId) || {
                name: "Gu√≠a Local",
                image: "https://randomuser.me/api/portraits/women/44.jpg",
                rating: 4.8,
                reviews: 142,
                location: "Madrid Centro",
                bio: "Experto en experiencias locales con a√±os de experiencia.",
                events: 42,
                followers: 247
            };
            
            document.getElementById('guide-name').textContent = guide.name;
            document.getElementById('guide-avatar').src = guide.image;
            document.getElementById('guide-rating').textContent = guide.rating;
            document.getElementById('guide-reviews').textContent = guide.reviews || "142";
            document.getElementById('guide-location').textContent = guide.location;
            document.getElementById('guide-bio').textContent = guide.bio;
            document.getElementById('guide-events').textContent = guide.events;
            document.getElementById('guide-followers').textContent = guide.followers;
            
            openModal('guide-modal');
        }
        
        function followGuide() {
            closeModal();
            showNotification('Ahora sigues a este gu√≠a');
        }
        
        function bookEvent() {
            closeModal();
            setTimeout(() => {
                openModal('booking-modal');
            }, 300);
        }
        
        // ============================================
        // FUNCIONES AUXILIARES
        // ============================================
        function getUserName(email) {
            const user = VALID_CREDENTIALS.find(cred => 
                cred.email.toLowerCase() === email.toLowerCase()
            );
            return user ? user.name : email.split('@')[0];
        }
        
        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: var(--primary);
                color: white;
                padding: 15px 20px;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
                z-index: 10000;
                max-width: 300px;
                transform: translateX(400px);
                transition: transform 0.4s;
                font-weight: 500;
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            notification.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 10);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 400);
            }, 3000);
        }
        
        // ============================================
        // INICIALIZACI√ìN
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar slider de radio
            const radiusSlider = document.getElementById('radius-slider');
            if (radiusSlider) {
                radiusSlider.addEventListener('input', updateRadiusDisplay);
                updateRadiusDisplay();
            }
            
            // A√±adir funcionalidad de b√∫squeda en mapa
            const mapSearchInput = document.getElementById('map-search-input');
            if (mapSearchInput) {
                mapSearchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && this.value.trim()) {
                        showNotification(`Buscando: ${this.value}`);
                        this.value = '';
                    }
                });
            }
            
            // Configurar tecla Enter para login
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    login();
                }
            });
            
            // Inicializar Discover en vista mapa por defecto
            switchDiscoverView('map');
            
            // Configurar Discover como pantalla activa inicial
            document.querySelectorAll('.nav-item')[1].classList.add('active');
            
            // Cerrar bottom sheet al hacer clic fuera
            document.getElementById('marker-details-sheet').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeMarkerDetails();
                }
            });
            
            // Cerrar filters panel al hacer clic fuera
            document.addEventListener('click', function(e) {
                const filtersPanel = document.getElementById('filters-panel');
                const filtersBtn = document.querySelector('.map-filters-btn');
                
                if (filtersPanel && filtersPanel.classList.contains('active') && 
                    !filtersPanel.contains(e.target) && 
                    !filtersBtn.contains(e.target)) {
                    filtersPanel.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>